#{extends 'main.html' /}
#{set title:'Home' /}

<div class='row'>
	<div class="six columns">
		<div class='foundation-header'>
			<h1>Standings</h1>
		</div>
		<table class="homepageTable">
			<thead>
				<tr>
					<td>Rank</td>
					<td>Person</td>
					<td>Rating</td>
					<td>Games Played</td>
					<td>
						#{if session.username}
							Action
			            #{/if}
		            </td>
				</tr>
			</thead>
			<tbody>
				#{list items:players, as:'player'}
					<tr>
						<td>${player_index}</td>
						<td><a href="@{Games.resultsForUser(player.email)}">${player}</a></td>
						<td>${player.rating.intValue()}</td>
						<td>${player.numGamesPlayed()}</td>
						<td>
							#{if session.username && session.username != player.email}
								<a href="@{Games.createChallenge(player.email)}">Challenge</a>
				            #{/if}
			            </td>
					</tr>
				#{/list}
			</tbody>
		</table>
	</div>
	<div class="six columns">
		<div class='foundation-header'>
			<h1>Latest Results</h1>
		</div>
		<table class="homepageTable">
			<thead>
				<tr>
					<td>Date Played</td>
					<td>Player One</td>
					<td>Player Two</td>
					<td>Score</td>
				</tr>
			</thead>
			<tbody>
				#{list items:games, as:'game'}
					#{include 'Games/gameResult.html' /}
				#{/list}
			</tbody>
		</table>
	</div>
</div>